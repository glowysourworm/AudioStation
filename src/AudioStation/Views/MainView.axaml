<UserControl xmlns="https://github.com/avaloniaui"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
             xmlns:vm="clr-namespace:AudioStation.ViewModels"
			 xmlns:iconPacks="https://github.com/MahApps/IconPacks.Avalonia"
			 xmlns:local="clr-namespace:AudioStation;assembly=AudioStation"
			 xmlns:template="clr-namespace:AudioStation.ControlTemplate;assembly=AudioStation"				
			 xmlns:controls="clr-namespace:AudioStation.Controls;assembly=AudioStation"
             mc:Ignorable="d" d:DesignWidth="800" d:DesignHeight="450"
             x:Class="AudioStation.Views.MainView"
             x:DataType="vm:MainViewModel">

	<Grid>

		<Grid.RowDefinitions>
			<RowDefinition Height="Auto" />
			<RowDefinition Height="*" />
			<RowDefinition Height="Auto" />
			<RowDefinition Height="Auto" />
			<RowDefinition Height="28" />
		</Grid.RowDefinitions>

		<!-- Toolbar -->
		<Menu HorizontalAlignment="Left">
			<MenuItem>
				<MenuItem.Header>
					<Button>
						<iconPacks:PackIconFontAwesome Kind="HeartRegular" />
					</Button>
				</MenuItem.Header>
			</MenuItem>
			<MenuItem>
				<MenuItem.Header>
					<ToggleButton IsChecked="{Binding ShowOutputMessages, Mode=TwoWay}">
						<iconPacks:PackIconFontAwesome Kind="TableListSolid" />
					</ToggleButton>
				</MenuItem.Header>
			</MenuItem>

			<!-- Open -->
			<MenuItem>
				<MenuItem.Header>
					<Button Command="{Binding OpenCommand}">
						<iconPacks:PackIconFontAwesome Kind="FolderOpenRegular" />
					</Button>
				</MenuItem.Header>
			</MenuItem>

			<!-- Save -->
			<MenuItem>
				<MenuItem.Header>
					<Button Command="{Binding SaveCommand}">
						<iconPacks:PackIconFontAwesome Kind="FloppyDiskRegular" />
					</Button>
				</MenuItem.Header>
			</MenuItem>
		</Menu>

		<!-- Primary Tab Views -->
		<TabControl TabStripPlacement="Left" Grid.Row="1">

			<TabControl.ContentTemplate>
				<template:TabContentTemplate ContentBackground="#EEEEEE" />
			</TabControl.ContentTemplate>

			<TabItem FontSize="14" Margin="0" Header="Configuration">
				<TabItem.HeaderTemplate>
					<template:TabItemHeaderTemplate Header="Configuration" />
				</TabItem.HeaderTemplate>
				<local:ConfigurationView x:Name="ConfigurationView" />
			</TabItem>

			<TabItem FontSize="14" Margin="0" Header="Library Manager">
				<TabItem.HeaderTemplate>
					<template:TabItemHeaderTemplate Header="Library Manager" />
				</TabItem.HeaderTemplate>
				<local:ManagerView x:Name="ManagerView" />
			</TabItem>

			<TabItem FontSize="14" Margin="0" Header="Now Playing">
				<TabItem.HeaderTemplate>
					<template:TabItemHeaderTemplate Header="Now Playing" />
				</TabItem.HeaderTemplate>
				<local:NowPlayingView x:Name="NowPlayingView" />
			</TabItem>


		</TabControl>

		<!-- Playlist Controller (Panel) (Bound to MainViewModel -> (Playlist)) -->
		<Border x:Name="PlaylistControllerPanel" Grid.Row="2" Background="White" CornerRadius="5" BorderBrush="Gray" BorderThickness="1">
			
			<Grid Grid.ColumnDefinitions="*, Auto" RowDefinitions="*, Auto">

				<!-- Primary Label:  Artist - Album - Title / Time Data -->
				<Border Grid.ColumnSpan="1" Grid.Row="0">
					<Grid Grid.ColumnDefinitions="*, Auto">

						<!-- Artist - Album - Title -->
						<StackPanel Orientation="Horizontal" VerticalAlignment="Bottom">
							<TextBlock Text="{Binding Playlist.NowPlaying.Entry.PrimaryArtist}" Margin="5" FontSize="14" Foreground="Gray" />
							<iconPacks:PackIconFontAwesome Kind="CircleSolid" Height="4" Width="4" VerticalAlignment="Center" Margin="5 0" />
							<TextBlock Text="{Binding Playlist.NowPlaying.Entry.Album}" Margin="5" FontSize="14" Foreground="Gray" />
							<iconPacks:PackIconFontAwesome Kind="CircleSolid" Height="4" Width="4" VerticalAlignment="Center" Margin="5 0" />
							<TextBlock Text="{Binding Playlist.NowPlaying.Entry.Title}" Margin="5" FontSize="14" Foreground="Gray" />
						</StackPanel>

						<!-- Time Data -->
						<StackPanel Orientation="Horizontal" Grid.Column="1" VerticalAlignment="Bottom">
							<TextBlock Text="{Binding Playlist.NowPlayingCurrentTime, StringFormat=HH:mm:ss}" FontSize="14" Foreground="Gray" Margin="10 5" />
							<TextBlock Text=" / " FontSize="14" Foreground="Gray" Margin="5 5" />
							<TextBlock Text="{Binding Playlist.NowPlaying.Duration, StringFormat=HH:mm:ss}" FontSize="14" Foreground="Gray" Margin="10 5" />
						</StackPanel>
						
					</Grid>
				</Border>

				<!-- Scrubber (use margin of the ellipse to set the offset) -->
				<Border Grid.Row="1" Padding="10" Background="LightGray" CornerRadius="5">
					<Grid>
						<controls:ScrubberControl CurrentTime="{Binding Playlist.NowPlayingCurrentTime}"
												  TotalTime="{Binding Playlist.NowPlaying.Duration}" />
					</Grid>					
				</Border>

				<!-- Player Controls -->
				<Border Grid.RowSpan="2" Grid.Column="1" VerticalAlignment="Stretch">
					<Grid Grid.ColumnDefinitions="*, Auto">

						<!-- Play / Stop / Pause / Prev / Next -->
						<StackPanel Orientation="Horizontal" VerticalAlignment="Center" Margin="10 0">
							<Button Cursor="Hand">
								<iconPacks:PackIconFontAwesome Kind="BackwardStepSolid" Height="20" Width="20" />
							</Button>
							<Button Cursor="Hand">
								<iconPacks:PackIconFontAwesome Kind="PauseSolid" Height="20" Width="20" />
							</Button>
							<Button Cursor="Hand">
								<iconPacks:PackIconFontAwesome Kind="PlaySolid" Height="20" Width="20" />
							</Button>
							<Button Cursor="Hand">
								<iconPacks:PackIconFontAwesome Kind="StopSolid" Height="20" Width="20" />
							</Button>
							<Button Cursor="Hand">
								<iconPacks:PackIconFontAwesome Kind="ForwardStepSolid" Height="20" Width="20" />
							</Button>
						</StackPanel>

						<!-- Volume -->
						<Border Grid.Column="1">
							<controls:ScrubberUnitControl Padding="10"
														  Margin="5 0"
														  CornerRadius="5" Background="LightGray"
														  CurrentOffset="{Binding Volume}"
														  VerticalAlignment="Center"
														  Width="250" />
						</Border>

					</Grid>
				</Border>
				
			</Grid>
		</Border>
		
		<!-- Output Messages (Status Panel) -->
		<Border Grid.Row="3" IsVisible="{Binding ShowOutputMessages}" Height="300">
			<TabControl Background="White">

				<TabControl.ContentTemplate>
					<template:TabContentTemplate ContentBackground="#EEEEEE" />
				</TabControl.ContentTemplate>

				<TabItem Header="Output" FontSize="14" Margin="0">
					
					<TabItem.HeaderTemplate>
						<template:TabItemHeaderTemplate Header="Output" />
					</TabItem.HeaderTemplate>
										
					<ListBox x:Name="OutputLB" FontSize="14" Foreground="#555555" Background="White">

						<!-- Disables mouse styling -->
						<ListBox.ItemContainerTheme>
							<ControlTheme TargetType="ListBoxItem">
								<Setter Property="Background" Value="White" />
							</ControlTheme>
						</ListBox.ItemContainerTheme>

						<!-- Enables custom mouse styling using their selectors -->
						<ListBox.Styles>
							<Style Selector="ListBoxItem:pointerover Border">
								<Setter Property="Background" Value="#EEEEEE" />
							</Style>
							<Style Selector="ListBoxItem:selected Border">
								<Setter Property="Background" Value="#EEEEEE" />
							</Style>
						</ListBox.Styles>

						<ListBox.ItemTemplate>
							<DataTemplate>
								<Border Padding="3">
									<TextBlock Text="{Binding Message}" />
								</Border>
							</DataTemplate>
						</ListBox.ItemTemplate>
					</ListBox>
					
				</TabItem>

			</TabControl>
		</Border>

		<!-- Status Bar (Footer) -->
		<Border x:Name="StatusBorder" Grid.Row="4" Background="#EEEEEE">
			<TextBlock x:Name="StatusMessageTB" 
					   Text="{Binding StatusMessage}" 
					   FontSize="14" Margin="5" 
					   Foreground="#555555" VerticalAlignment="Center" />
		</Border>

	</Grid>
</UserControl>
